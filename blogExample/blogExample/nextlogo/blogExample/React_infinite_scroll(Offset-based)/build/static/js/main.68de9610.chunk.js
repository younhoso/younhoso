(this.webpackJsonpmoviepedia=this.webpackJsonpmoviepedia||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(9),c=n.n(r),i=n(2),a=n(8),s=n(5),o=n(3),u=n(1),j=(n(14),n(0));function f(e){var t=new Date(e);return"".concat(t.getFullYear(),". ").concat(t.getMonth()+1,". ").concat(t.getDate())}var b=Object(u.forwardRef)((function(e,t){var n=e.item,r=e.onDelete;return Object(j.jsxs)("div",{className:"ReviewListItem",ref:t,children:[Object(j.jsx)("img",{className:"ReviewListItem-img",src:n.imgUrl,alt:n.title}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:n.title}),Object(j.jsx)("p",{children:n.rating}),Object(j.jsx)("p",{children:f(n.createdAt)}),Object(j.jsx)("p",{children:n.content}),Object(j.jsx)("button",{onClick:function(){r(n.id)},children:"\uc0ad\uc81c"})]})]})}));var l=function(e){var t=e.items,n=e.onDelete,r=e.setTarget;return Object(j.jsx)("ul",{children:t.map((function(e,c){var i=c===t.length-1;return Object(j.jsx)("li",{children:Object(j.jsx)(b,{item:e,onDelete:n,ref:i?r:null})},c)}))})};function d(e){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(Object(i.a)().mark((function e(t){var n,r,c,a,s,o,u,j,f;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.order,r=void 0===n?"createdAt":n,c=t.offset,a=void 0===c?0:c,s=t.limit,o=void 0===s?6:s,u="order=".concat(r,"&offset=").concat(a,"&limit=").concat(o),e.next=4,fetch("https://learn.codeit.kr/api/film-reviews?".concat(u));case 4:return j=e.sent,e.next=7,j.json();case 7:return f=e.sent,e.abrupt("return",f);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){var e=Object(u.useState)("createdAt"),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)(0),f=Object(o.a)(c,2),b=f[0],O=f[1],v=Object(u.useState)(!0),p=Object(o.a)(v,2),h=p[0],x=p[1],m=Object(u.useState)([]),g=Object(o.a)(m,2),w=g[0],k=g[1],D=Object(u.useState)(null),y=Object(o.a)(D,2),I=y[0],S=y[1],A=w.sort((function(e,t){return t[n]-e[n]})),C=function(){var e=Object(s.a)(Object(i.a)().mark((function e(t){var n,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:n=e.sent,r=n.paging,c=n.reviews,0===t.offset?k(c):k([].concat(Object(a.a)(w),Object(a.a)(c))),O(t.offset+t.limit),x(r.hasNext);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){var e=function(){var e=Object(s.a)(Object(i.a)().mark((function e(t,r){var c,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(o.a)(t,1),!(a=c[0]).isIntersecting){e.next=7;break}if(e.t0=h,!e.t0){e.next=6;break}return e.next=6,C({order:n,offset:b,limit:6});case 6:r.unobserve(a.target);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t=new IntersectionObserver(e,{threshold:"1"});return I&&t.observe(I),0===b&&C({order:n,offset:0,limit:6}),function(){return t&&t.disconnect()}}),[I,b]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return r("createdAt")},children:"\ucd5c\uc2e0\uc21c"}),Object(j.jsx)("button",{onClick:function(){return r("rating")},children:"\ubca0\uc2a4\ud2b8\uc21c"})]}),Object(j.jsx)(l,{items:A,onDelete:function(e){var t=w.filter((function(t){return t.id!==e}));k(t)},setTarget:S})]})};c.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.68de9610.chunk.js.map