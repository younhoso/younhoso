<link rel="stylesheet" href="/assets/css/9/base.css" />
<link rel="stylesheet" href="/assets/css/9/event.css" />
<link rel="stylesheet" href="/assets/css/9/modal.css">

<div class="event">
	<div data-aos="fade">
		<img src="/assets/imgs/round/9/event/pc_banner.webp" alt="event" title="event" class="pc_banner" />
		<img src="/assets/imgs/round/9/event/mo_banner.webp" alt="event" title="event" class="mo_banner" />
	</div>
	<div class="mt100 mt-lg-15">
		<div class="wraper">
			<div class="event-title">
				<p class="period mb20 pt10 pb10 pl20 pr20">참여 기간 : 8/16 ~ 9/16</p>
				<p>
					<b>맛진의 힐링 캠프에 온 것을 환영해<br/>
					고생한 나를 위해 잠시 쉬어가는 타임 어때?</b></p>
			</div>
			<p class="f20 f16-lg tc mt20">뜨거운 여름도 열심히 달려온 우리, 휴식이 필요해!</p>
			<p class="f20 f16-lg tc mt20">맛진이는 캠핑장에서 좋아하는 사람들과 모닥불 앞에서 도란도란 수다 떠는 게 가장 힐링이야<br/>
				맛둥이들은 떠올리기만 해도 기분이 좋아지는 장소나 에피소드 있어?</p>
			<p class="f20 f16-lg tc mt20"><b>맛둥이들만의 힐링 장소나 에피소드를 댓글로 알려줘!</b></p>

			<div class="flex flex-vc flex-tc nowrap gap30 gap-lg-0 pt90 mt-lg-40 pt-lg-0 is-pc">
				<div class="article-thumbnail-inner">
					<img src="/assets/imgs/round/9/event/topobject1.png">
				</div>
			</div>

			<div class="eventBtn mt85 p_modal_1_open" onclick="popupOpen()">
				<a href="#0">이벤트 참여하기 ></a>
			</div>
		</div>
	</div>

	<div class="event-01 mt95 mt-lg-80">
		<div class="wraper pt100 pb30 pt-lg-30 pb100">
			<div class="event-title tc">
				<strong class="title f18-lg">🏕분위기 있는 힐링을 위한 선물🏕</strong>
				<p class="f20 f18-lg mt24 mt-lg-15">맛둥이들의 휴식을 감성으로 가득 채워 줄<br/>
          향기로운 선물을 준비해 봤어!</p>
			</div>
			<div class="flex gap20 mt-lg-15 flex-tc mt80">
				<div class="event-image flex flex-vb pb58">
					<div class="w400 wfull-lg-100 center">
						<p class="item_count">5명</p>
						<img src="/assets/imgs/round/9/event/4.png">
					</div>
					<p class="f30 col-12 text_align_center"><b>엔제리너스 캠핑 드립 세트</b></p>
				</div>
			</div>
		</div>
	</div>

	<div class="event-02">
		<div class="wraper">
			<div class="flex">
				<b>안내사항</b>
				<ul>
					<li>이벤트 참여 시, 개인정보 오기재으로 인한 당첨자 누락은 책임지지 않습니다.</li>
					<li>당첨자 안내 및 경품 발송은 개별 연락처로 안내해 드립니다.</li>
					<li>본 이벤트의 경품 제공을 목적으로 개인 정보를 요구할 수 있습니다.</li>
					<li>당첨자 안내 개별 메시지 발송일 이후 14일 이내에 경품 수령 의사 및 개인 정보 회신이 없을 시, 자동으로 당첨자 대상에서 제외될 수 있습니다.</li>
					<li>이벤트 경품 수령을 위한 개인정보 회신 확인 후 순차적으로 경품을 발송해드립니다.</li>
					<li>수집된 개인정보는 이벤트 안내 및 경품 증정 이외에는 사용되지 않습니다.</li>
					<li>경품은 이벤트 참여 시 작성해주신 개인 정보로만 발송 가능하며, 다른 이름, 연락처, 주소 등으로 변경하여 수령하는 것은 불가합니다.</li>
				</ul>
			</div>
		</div>
	</div>

	<div class="event-03">
		<div class="event-comment">
			<div class="comment-head">
				<div class="wraper">
					<div class="flex flex-tl">
						<strong>댓글</strong>
						<ul>
							<li class="active"><a href="javascript:;">추천순</a></li>
							<li><a href="javascript:;">최신순</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="comment-body">
				<!-- tabs기능 -->
				<!-- <div class="wraper"> 
					<div class="comment-tab">
						<ul>
							<li class="active"><a href="javascript:;">EVENT.1</a></li>
							<li><a href="javascript:;">EVENT.2</a></li>
						</ul>
					</div>
				</div> -->
				<div class="comment-list">
					<!-- <p class="list-none">등록된 댓글이 없습니다.</p> -->
					<div class="wraper">
						<ul class="list" id="list">
							<!-- 댓글 데이터 삽입 -->
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 이벤트 참여 모달 시작 -->
<div class="modal">
	<div class="popup popup_small event_popup_0 kr">
		<div class="p_con">
			<div class="popup_top">
				<div style="display: none; visibility: collapse;"></div>
				<div>맛ZINE 입국 심사 스탬프를 찾아라</div>
				<div style="display: none; visibility: collapse;"></div>
			</div>

			<div class="text_align_center randomImage">
				
			</div>

			<div class="text_align_center">
				<div class="modal_description_title">여행 갈 때 듣는 나만의 음악은?</div>
				<div class="modal_description_body">*댓글로 플레이리스트 적고 이벤트 참여하러 가기</div>
			</div>
		</div>
		<div class="popup_close">
			<img src="/assets/imgs/round/9/close.png" alt="닫기 버튼" />
		</div>
		<div class="button p_btn p_btn_0">
			이벤트 참여하기
		</div>
	</div>
	<div class="popup event_popup_1 kr">
		<div class="p_con">
			<div class="popup_top">
				<div>롯데GRS</div>
				<div>개인정보 활용 동의서</div>
				<div>※ 본 이벤트는 롯데GRS 임직원 및 점주 한정 참여 가능합니다.</div>
			</div>

			<div class="popup_content">
				<div class="check_all flex aic check_box allCheck">
					<!-- <label class="checkbox" for="N_big"> -->
					<input type="checkbox" id="N_big" hidden>
					<span class="checkbox_icon"></span>
					<span class="checkbox_text check_all_t">전체 동의하기</span>
					<!-- </label> -->
				</div>
				<p class="check_info">
					롯데GRS 사내웹진 ‘맛ZINE’ 이벤트 당첨안내 및 배송 관련 다양한 서비스 제공을 위해 개인 정보 수집, 이용에 관하여 관계법령에 의거하여 고지하오니, 동의해 주시기 바랍니다.
				</p>

				<div class="line"></div>

				<div class="check_detail">
					<b>맛진 동의 항목</b>

					<div class="check_list">
						<div class="check_box flex aic jcsb">
							<div class="checkbox flex aic minCheck">
								<input id="N_one" type="checkbox" hidden>
								<span class="checkbox_icon"></span>
								<span class="checkbox_text">[필수] 개인정보 수집 및 이용 동의</span>
							</div>

							<div class="arrow_btn p_modal_2_open">
								<img src="/assets/imgs/round/9/nextIcon.png" alt="next"/>
							</div>
						</div>

						<div class="check_under_list">
							<div class="check_box">
								<div class="checkbox flex aic">
									<input type="checkbox">
									<span class="checkbox_icon"></span>
									<span class="checkbox_text">성명</span>
								</div>
							</div>
							<div class="check_box">
								<div class="checkbox flex aic">
									<input type="checkbox">
									<span class="checkbox_icon"></span>
									<span class="checkbox_text">부서/지점명</span>
								</div>
							</div>
							<div class="check_box">
								<div class="checkbox flex aic">
									<input type="checkbox">
									<span class="checkbox_icon"></span>
									<span class="checkbox_text">연락처</span>
								</div>
							</div>
						</div>

						<div class="check_box flex aic jcsb">
							<div class="checkbox min_check_2 flex aic">
								<input type="checkbox">
								<span class="checkbox_icon"></span>
								<span class="checkbox_text">[필수] 개인정보의 취급 위탁 동의</span>
							</div>

							<div class="arrow_btn p_modal_3_open">
								<img src="/assets/imgs/round/9/nextIcon.png" alt="next"/>
							</div>
						</div>
					</div>

					<p class="kr warn">※ 개인정보 동의를 거부할 권리가 있으나, 거부할 경우 서비스 이용이 제한됩니다.</p>
				</div>
			</div>
		</div>
		<div class="popup_close">
			<img src="/assets/imgs/round/9/close.png" alt="닫기 버튼" />
		</div>
		<div class="button p_btn p_btn_1">
			동의하고 계속하기
		</div>
	</div>
	<div class="popup event_popup_2 kr">
		<div class="p_con">
			<div class="popup_top">
				<p>롯데GRS</p>
				<h2>개인정보 수집 및 이용 동의</h2>
				<p>※ 본 이벤트는 롯데GRS 임직원 및 점주 한정 참여 가능합니다.</p>
			</div>

			<div class="popup_content">
				<p class="check_info">
					롯데GRS 사내웹진 ‘맛ZINE’ 이벤트 당첨안내 및 배송 관련 다양한 서비스 제공을 위해 <br> 개인 정보 수집, 이용에 관하여 관계법령에 의거하여 고지하오니, 동의해 주시기
					바랍니다.
				</p>

				<div class="info_box_pop">
					<div class="info_intro_item">
						<h3>1) 개인정보 수집 및 이용 동의</h3>
						<p>롯데GRS 사내웹진 이벤트</p>
					</div>
					<div class="info_intro_item">
						<h3>2) 수집하는 개인정보의 항목</h3>
						<p>이름, 부서/지점명, 연락처 등 경품 수령을 위한 개인정보</p>
					</div>
					<div class="info_intro_item">
						<h3>3) 개인정보 보유 및 이용기간</h3>
						<p>수집일로부터 6개월</p>
					</div>
				</div>
				<p class="kr warn">※ 본 이벤트는 롯데GRS 임직원 및 점주 한정 참여 가능합니다.</p>
			</div>
		</div>
		<div class="popup_close">
			<img src="/assets/imgs/round/9/close.png" alt="닫기 버튼" />
		</div>
		<div class="button p_btn p_btn_2">
			확인
		</div>
	</div>
	<div class="popup event_popup_3 kr">
		<div class="p_con">
			<div class="popup_top">
				<p>롯데GRS</p>
				<h2>개인정보의 취급 위탁 동의</h2>
				<p>※ 본 이벤트는 롯데GRS 임직원 및 점주 한정 참여 가능합니다.</p>
			</div>

			<div class="popup_content">
				<p class="check_info">
					롯데GRS 사내웹진 ‘맛ZINE’ 이벤트 당첨안내 및 배송 관련 다양한 서비스 제공을 위해 <br> 개인 정보 수집, 이용에 관하여 관계법령에 의거하여 고지하오니, 동의해 주시기
					바랍니다.
				</p>


				<div class="info_box_pop">
					<p>
						롯데GRS는 서비스 향상을 위해서 아래와 같이 개인정보를 위탁하고 있으며, 관계 법령에 의거 위탁계약 시 개인정보가 안전하게 관리될 수 있도록 필요한 사항을 규정합니다.
					</p>

					<div class="info_back_item">
						<h3>1) 업무내용 : 서비스 운영, 이벤트 경품 배송, 고객지원</h3>
						<h3>2) 수탁업체 : (주)스카이벤처스</h3>
					</div>
				</div>
				<p class="kr warn">※ 본 이벤트는 롯데GRS 임직원 및 점주 한정 참여 가능합니다.</p>


			</div>
		</div>
		<div class="popup_close">
			<img src="/assets/imgs/round/9/close.png" alt="닫기 버튼" />
		</div>
		<div class="button p_btn p_btn_3">
			확인
		</div>
	</div>
	<div class="popup event_popup_4 kr">
		<div class="p_con">
			<div class="popup_top">
				<p>EVENT</p>
				<h2 class="pt8" style="color: #73BF00;">맛진 캠프</h2>
			</div>

			<div>
				<form class="event_form kr" id="event_form">
					<!-- 이건 실서버에 반영할때 아래 input으로 변경 -->
					<!-- 개발용 실서버 반영할때 아래 input 두개 지우고 위에 input으로 변경 -->
					<input type="hidden" name="round" value="9" id="round">
					<input type="hidden" name="index" value="1" id="index">

					<div>
						<div>
							<input type="text" placeholder="닉네임을 입력해주세요." name="user_nickname" id="user_nickname">
							<p>※ 댓글에 노출되는 닉네임입니다.</p>
						</div>
						<div>
							<input type="text" placeholder="이름을 입력해주세요." name="user_name" id="user_name">
						</div>
					</div>
					<div>
						<div>
							<input type="text" placeholder="부서/지점명을 입력해주세요." name="department" id="department">
						</div>
						<div>
							<input type="text" placeholder="휴대폰 번호를 입력해주세요." name="user_hp" id="user_hp">
						</div>
					</div>
					<div style="display:block">
						<div class="comment_write_desc">
							<textarea cols="10" rows="10" placeholder="댓글을 입력해주세요" name="text" id="text"
								style="resize: none;"></textarea>
						</div>
						<!--
						<div style="padding-top:1rem">
							<p>프로필사진첨부</p>
							<input name="select_file" id="select_file" accept="image/png, image/jpeg" type="file"
								multiple style="display:none;">
							<div class="user_images">
								<button class="image_select" type="button" id="select_button">
									<img src="/assets/imgs/round/9/event/camera.png">
								</button>
							</div>
						</div>
						-->
					</div>
					<div class="form_photo_div" style="display: none;">
						<p>프로필사진첨부</p>
						<span style="display: flex;">
							<span class="images"></span>
							<label class="photo_label">
								<img src="/assets/imgs/round/9/event/camera.png" alt="#" title="#">
								<input type="file" hidden>
							</label>
						</span>
					</div>
				</form>
			</div>

			<div class="popup_close">
				<img src="/assets/imgs/round/9/close.png" alt="닫기 버튼" />
			</div>

			<p class="kr warn">※ 본 이벤트는 롯데GRS 임직원 및 점주 한정 참여 가능합니다.</p>
			<div class="button p_btn p_btn_4">
				이벤트 응모하기
			</div>
		</div>
	</div>
	<div class="popup event_popup_5 kr pb0">
		<div class="pop_top">
			<p class="">NOTICE</p>
			<div class="popup_close">
				<img src="/assets/imgs/round/9/close.png" alt="닫기 버튼" />
			</div>
		</div>
		<div class="p_con py60 py-lg-30">
			<h2 style="color:#73BF00;">맛진 캠프</h2>
			<p class="mt10 mt-lg-7">이벤트 응모 완료되었습니다!</p>
		</div>
	</div>

	<!-- <div class="comment_image_popup popup">
		<div class="image_slide swiper">
			<div class="swiper-wrapper slide">
				<div class="swiper-slide popup_image">
					<img src="/assets/imgs/round/9/event/1.png" alt="#" title="#">
				</div>
				<div class="swiper-slide popup_image">
					<img src="/assets/imgs/round/9/event/1.png" alt="#" title="#">
				</div>
				<div class="swiper-slide popup_image">
					<img src="/assets/imgs/round/9/event/1.png" alt="#" title="#">
				</div>
			</div>
		</div>
		<div class="swiper-pagination"></div>
		<div class="popup_close">
			X
		</div>
	</div> -->
</div>
<!-- 이벤트 참여 모달 끝 -->

<script>
	var round = 9;
	var index = 1;
	var order = 1;
	var ignore_seq = [];
	var isFetching = false;

	$(document).ready(function () {
		show_more();
	});

	// 이벤트 탭
	$(document).on("click", ".comment-tab ul li a", function () {
		var parents = $(this).parent("li");
		var idx = parents.index();
		
		ignore_seq = []

		if(parents.siblings().hasClass('active')){
			index = (index === 1) ? 2 : 1;
			init_reply_data();
			show_more();
		}
		parents.addClass("active").siblings().removeClass("active");
	});

	// 추천순/최신순 탭
	$(document).on("click", ".comment-head ul li a", function () {
		var parents = $(this).parent("li");
		var idx = parents.index();

		ignore_seq = []
		if(parents.siblings().hasClass('active')){
			order = (order === 1) ? 2 : 1;
			init_reply_data();
			show_more();
		}

		parents.addClass("active").siblings().removeClass("active");
	});

	// 팝업
	function popupOpen() {
		$(`.modal`).css({
			'visibility': 'visible',
			'pointer-events': 'inherit',
		});
	};

	function show_more() {
		isFetching = true;
		get_reply_data();
	}

	function init_reply_data() {
		$('#list').html('');
	}

	function get_reply_data() {
		$.post('/event/get_reply_data', { round: round, index: index, order: order, ignore_seq: ignore_seq }, function (result) {
			var r = JSON.parse(result);
			
			if (r.result) {
				var html = '';
				if (r.list.length) {
					for (var i = 0; i < r.list.length; i++) {
						html += '<li class="list-item">';
						html += '<div class="list-head">';
						if (r.list[i].image_datas.length > 0) {
							html += '<img class="mo" src="/' + r.list[i].image_datas[0].file_path + '">';
						} else {
							html += '<img class="mo" src="/assets/imgs/round/9/event/profile.svg">';
						}
						html += '<div>';
						html += '<b>' + r.list[i].nickname + '</b>';
						html += '<time>' + r.list[i].date + '</time>';
						html += '</div>';
						html += '</div>';
						html += '<div class="list-body">';
						html += '<p>' + r.list[i].text + '</p>';
						html += '<div class="list-body-like">';
						if (r.list[i].log_seq) {
							html += '<a href="javascript:like(' + r.list[i].seq + ')" id="like' + r.list[i].seq + '" class="active">' + r.list[i].like.toLocaleString('en') + '</a>';
						} else {
							html += '<a href="javascript:like(' + r.list[i].seq + ')" id="like' + r.list[i].seq + '">' + r.list[i].like.toLocaleString('en') + '</a>';
						}
						html += '</div>';
						html += '</div>';
						html += '</li>';
						html += '<input type="hidden" value="' + r.list[i].seq + '">';
						ignore_seq.push(r.list[i].seq);
					}
				}

				$('#list').append(html);
				isFetching = false;
			}
		});
	}

	function like(seq) {
		$.post('/event/like', { seq: seq }, function (result) {
			var r = JSON.parse(result);
			if (r.result) {
				$('#like' + seq).html(r.after);
				if (Number(r.after) > Number(r.before)) {
					$('#like' + seq).addClass('active');
				} else {
					$('#like' + seq).removeClass('active');
				}
			} else {
				alert(r.msg);
			}
		});
	}

	window.onscroll = function (e) {
		if (!isFetching && (window.innerHeight + window.scrollY + 100) >= document.body.offsetHeight) {
			show_more();
		}
	}
</script>

<script src="/assets/js/rabbit-event.js"></script>