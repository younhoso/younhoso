<link rel="stylesheet" href="/assets/css/12/base.css" />
<link rel="stylesheet" href="/assets/css/12/event.css" />

<style>
  header {
    background: #000 !important;
  }
</style>

<div class="event">
  <div>
    <img
      src="/assets/imgs/round/12/event/pc_banner.webp"
      alt="event"
      title="event"
      class="pc_banner"
    />
    <img
      src="/assets/imgs/round/12/event/mo_banner.webp"
      alt="event"
      title="event"
      class="mo_banner"
    />
  </div>

  <div class="event-01">
    <div class="container">
      <p class="period pt10 pb10 pl20 pr20 f20">참여 기간 : 02/20 ~ 03/21</p>
      <div class="event-title mt20 mt-lg-25">
        <p>MAKE TASTY</p>
      </div>
      <div class="event-title event-image mt24 mt-lg-18 f20 f16-lg">
        <div class="block">
          새해는 역시 계획을 짜는 설레는 맛이 있지!<br/>
          맛둥이들의 목표를 응원하기 위해 응원의 꽃말이 담긴 꽃을 찾아왔어<br/>
          <b>맛둥이들의 올해 목표를 알려줘~</b>
        </div>
      </div>
      <div
        class="flex flex-vc flex-tc fd-lg-c nowrap gap30 gap-lg-60 mt140 mt-lg-100 pt100 pt-lg-0 is-pc"
      >
        <div class="event-item mt-lg-100">
          <div class="article-thumbnail-inner">
            <img src="/assets/imgs/round/12/event/prop01_BK.png" />
          </div>
          <div class="tc desc-inner pt30 pl30 pb40 pr30">
            <div class="f24"><b>STEP. 1</b></div>
            <div class="f20 mt20 mt-lg-15 desc">
              맛진의 콘텐츠들을 꼼꼼히 읽어주세요!<br/>
              (Hint: 스티커는 POST, NEWS 페이지 중<br/>
              어딘가에 숨어있어요!)
            </div>
          </div>
        </div>
        <div class="event-item mt-lg-100">
          <div class="article-thumbnail-inner">
            <img src="/assets/imgs/round/12/event/prop02_BK.png" />
          </div>
          <div class="tc desc-inner pt30 pl30 pb40 pr30">
            <div class="f24"><b>STEP. 2</b></div>
            <div class="f20 mt20 mt-lg-15 desc">
              스티커를 발견하셨다면, 클릭 후<br/>
              올 한 해의 목표와<br/>
              그 이유를 댓글로 남겨주세요! 
            </div>
          </div>
        </div>
        <div class="event-item mt-lg-100">
          <div class="article-thumbnail-inner">
            <img src="/assets/imgs/round/12/event/prop03_BK.png" />
          </div>
          <div class="tc desc-inner pt30 pl30 pb40 pr30">
            <div class="f24"><b>STEP. 3</b></div>
            <div class="f20 mt20 mt-lg-15 desc">
              스티커들 중 하나만 찾아도<br/>
              댓글 참여 기회가 있고,<br/>
              추첨을 통해 총 10분에게<br/>
              감사의 선물을 드립니다!
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="event-03">
    <div class="container">
      <div class="event-title">
        <p>🐲2024를 새롭게 써 내려갈 맛둥이를 위한 선물🐲</p>
      </div>
      <div class="event-present">
        <div class="pre-01">
          <div class="col-12 relative fd-lg-c">
            <div class="giftcard">
              <div class="event_member">2명</div>
              <div class="event-image br">
                <img src="/assets/imgs/round/12/event/1.webp" />
                <p>삼성전자<br/>
                  로봇 청소기</p>
              </div>
            </div>
            <div class="giftcard">
              <div class="event_member">3명</div>
              <div class="event-image br">
                <img src="/assets/imgs/round/12/event/2.webp" />
                <p>젠틀몬스터<br/>
                  선글라스</p>
              </div>
            </div>
            <div class="giftcard">
              <div class="event_member">5명</div>
              <div class="event-image br">
                <img src="/assets/imgs/round/12/event/3.webp" />
                <p>엔제리너스<br/>
                  패키지</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="event-content">
        <p class="tc f22">※경품은 선택이 불가하며, 랜덤 증정됩니다.</p>
      </div>
    </div>

    <div class="event-05">
      <div class="container">
        <div class="flex">
          <b>안내사항</b>
          <ul>
            <li>
              이벤트 참여 시, 개인정보 오기재으로 인한 당첨자 누락은 책임지지
              않습니다.
            </li>
            <li>당첨자 안내 및 경품 발송은 개별 연락처로 안내해 드립니다.</li>
            <li>
              본 이벤트의 경품 제공을 목적으로 개인 정보를 요구할 수 있습니다.
            </li>
            <li>
              당첨자 안내 개별 메시지 발송일 이후 14일 이내에 경품 수령 의사 및
              개인 정보 회신이 없을 시, 자동으로 당첨자 대상에서 제외될 수
              있습니다.
            </li>
            <li>
              이벤트 경품 수령을 위한 개인정보 회신 확인 후 순차적으로 경품을
              발송해드립니다.
            </li>
            <li>
              수집된 개인정보는 이벤트 안내 및 경품 증정 이외에는 사용되지
              않습니다.
            </li>
            <li>
              경품은 이벤트 참여 시 작성해주신 개인 정보로만 발송 가능하며, 다른
              이름, 연락처, 주소 등으로 변경하여 수령하는 것은 불가합니다.
            </li>
            <li>
              당첨자는 참여자 중 정성스러운 댓글을 남겨주신 인원을 선발하여 랜덤 추첨됩니다.
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="event-06">
      <div class="container">
        <div class="event-comment">
          <div class="comment-head">
            <strong>댓글</strong>
            <ul>
              <li class="active"><a href="javascript:;">추천순</a></li>
              <li><a href="javascript:;">최신순</a></li>
            </ul>
          </div>
          <div class="comment-body">
            <div class="comment-list">
              <!-- <p class="list-none">등록된 댓글이 없습니다.</p> -->
              <ul class="list" id="list"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    var round = 12;
    var index = 1;
    var order = 1;
    var ignore_seq = [];
    var isFetching = false;

    $(document).ready(function () {
      show_more();
    });

    // 추천순/최신순 탭
    $(document).on("click", ".comment-head ul li a", function () {
      var parents = $(this).parent("li");
      var idx = parents.index();

      ignore_seq = [];
      if (parents.siblings().hasClass("active")) {
        order = order === 1 ? 2 : 1;
        init_reply_data();
        show_more();
      }

      parents.addClass("active").siblings().removeClass("active");
    });

    // 팝업
    function popupOpen(index) {
      $(`.modal`).css({
        visibility: "visible",
        "pointer-events": "inherit",
      });
      $(".event_popup_1").css("display", "block");
      $(".p_btn_1").attr("data-index", index);
    }

    function show_more() {
      isFetching = true;
      get_reply_data();
    }

    function init_reply_data() {
      $("#list").html("");
    }

    function get_reply_data() {
      $.post(
        "/event/get_reply_data",
        { round: round, index: index, order: order, ignore_seq: ignore_seq },
        function (result) {
          var r = JSON.parse(result);

          if (r.result) {
            var html = "";
            if (r.list.length) {
              for (var i = 0; i < r.list.length; i++) {
                html += '<li class="list-item">';
                html += '<div class="list-head">';
                if (r.list[i].image_datas.length > 0) {
                  html +=
                    '<img class="mo" src="/' +
                    r.list[i].image_datas[0].file_path +
                    '">';
                } else {
                  html +=
                    '<img class="mo" src="/assets/imgs/round/6/event/profile.svg">';
                }
                html += "<div>";
                html += "<b>" + r.list[i].nickname + "</b>";
                html += "<time>" + r.list[i].date + "</time>";
                html += "</div>";
                html += "</div>";
                html += '<div class="list-body">';
                html += "<p>" + r.list[i].text + "</p>";
                html += '<div class="list-body-like">';
                if (r.list[i].log_seq) {
                  html +=
                    '<a href="javascript:like(' +
                    r.list[i].seq +
                    ')" id="like' +
                    r.list[i].seq +
                    '" class="active">' +
                    r.list[i].like.toLocaleString("en") +
                    "</a>";
                } else {
                  html +=
                    '<a href="javascript:like(' +
                    r.list[i].seq +
                    ')" id="like' +
                    r.list[i].seq +
                    '">' +
                    r.list[i].like.toLocaleString("en") +
                    "</a>";
                }
                html += "</div>";
                html += "</div>";
                html += "</li>";
                html += '<input type="hidden" value="' + r.list[i].seq + '">';
                ignore_seq.push(r.list[i].seq);
              }
            }

            $("#list").append(html);
            isFetching = false;
          }
        }
      );
    }

    function like(seq) {
      $.post("/event/like", { seq: seq }, function (result) {
        var r = JSON.parse(result);
        if (r.result) {
          $("#like" + seq).html(r.after);
          if (Number(r.after) > Number(r.before)) {
            $("#like" + seq).addClass("active");
          } else {
            $("#like" + seq).removeClass("active");
          }
        } else {
          alert(r.msg);
        }
      });
    }

    $(window).scroll(function(e) {
      if (!isFetching && window.innerHeight + window.scrollY + 100 >= document.body.offsetHeight) {
        show_more();
      }
    });
  </script>
</div>
